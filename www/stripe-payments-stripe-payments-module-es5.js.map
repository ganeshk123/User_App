{"version":3,"sources":["webpack:///src/app/pages/stripe-payments/stripe-payments.page.html","webpack:///src/app/pages/stripe-payments/stripe-payments-routing.module.ts","webpack:///src/app/pages/stripe-payments/stripe-payments.module.ts","webpack:///src/app/pages/stripe-payments/stripe-payments.page.scss","webpack:///src/app/pages/stripe-payments/stripe-payments.page.ts"],"names":["routes","path","component","StripePaymentsPageRoutingModule","imports","forChild","exports","StripePaymentsPageModule","declarations","StripePaymentsPage","router","api","util","navCtrl","cart","cards","console","log","userInfo","stripe_key","httpGet","stripe","subscribe","data","token","id","error","message","showErrorAlert","errorToast","getString","fire","title","text","icon","confirmButtonText","cancelButtonText","showCancelButton","backdrop","background","then","value","options","amount","grandTotal","currency","stripeCode","customer","card","url","show","externalPost","paykey","hide","showToast","createOrder","storeId","Set","map","item","store_id","orderStatus","forEach","element","info","status","push","notes","time","format","param","uid","localStorage","getItem","join","date_time","datetime","add","paid_method","order_to","deliveryAt","orders","JSON","stringify","address","deliveryAddress","driver_id","total","totalPrice","tax","orderTax","grand_total","delivery_charge","deliveryPrice","coupon_code","coupon","discount","pay_key","assignee","extra","userOrderTaxByStores","post","createOrderNotification","stores","clearCart","publishNewOrder","navigateRoot","navigate","back","getCards","selector","template"],"mappings":"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","file":"stripe-payments-stripe-payments-module-es5.js","sourcesContent":["export default \"<!-- \\n   Authors : initappz (Rahul Jograna)\\n  Website : https://initappz.com/\\n  App Name : ionic 5 groceryee app\\n  Created : 10-Sep-2020\\n  This App Template Source code is licensed as per the\\n  terms found in the Website https://initappz.com/license\\n  Copyright and Good Faith Purchasers © 2020-present initappz.\\n -->\\n<ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-button (click)=\\\"back()\\\">\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"arrow-back\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n    <ion-title> {{util.getString('Pay with Stripe')}} </ion-title>\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-button (click)=\\\"onAdd()\\\">\\n        <ion-icon slot=\\\"end\\\" name=\\\"add\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <div class=\\\"div_content\\\">\\n    <div *ngIf=\\\"!cards?.length\\\">\\n      <p class=\\\"ion-text-center\\\"> {{util.getString('No Card Found Please Add Card')}} </p>\\n    </div>\\n    <ion-radio-group [(ngModel)]=\\\"token\\\">\\n      <ion-item class=\\\"div_inner\\\" lines=\\\"none\\\" *ngFor=\\\"let card of cards;let i = index\\\">\\n        <ion-thumbnail slot=\\\"end\\\">\\n          {{card.brand}}\\n        </ion-thumbnail>\\n        <ion-radio (ionSelect)=\\\"changeMethod(card.id)\\\" [value]=\\\"card.id\\\" slot=\\\"start\\\"></ion-radio>\\n        <ion-label>XXXX{{card.last4}} <br> {{util.getString('Expiry')}} {{card.exp_month}} / {{card.exp_year}}\\n        </ion-label>\\n      </ion-item>\\n    </ion-radio-group>\\n    <ion-button expand=\\\"block\\\" *ngIf=\\\"cards?.length\\\" class=\\\"btn_addcard\\\" (click)=\\\"payment()\\\">\\n      {{util.getString('Payment')}} &nbsp;\\n      <span *ngIf=\\\"util.cside ==='left'\\\">\\n        {{util.currecny}} {{cart.grandTotal}}\\n      </span>\\n      <span *ngIf=\\\"util.cside ==='right'\\\">\\n        {{cart.grandTotal}} {{util.currecny}}\\n      </span>\\n    </ion-button>\\n\\n  </div>\\n</ion-content>\";","/*\n  Authors : initappz (Rahul Jograna)\n  Website : https://initappz.com/\n  App Name : ionic 5 groceryee app\n  Created : 10-Sep-2020\n  This App Template Source code is licensed as per the\n  terms found in the Website https://initappz.com/license\n  Copyright and Good Faith Purchasers © 2020-present initappz.\n*/\nimport { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { StripePaymentsPage } from './stripe-payments.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: StripePaymentsPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class StripePaymentsPageRoutingModule { }\n","/*\n  Authors : initappz (Rahul Jograna)\n  Website : https://initappz.com/\n  App Name : ionic 5 groceryee app\n  Created : 10-Sep-2020\n  This App Template Source code is licensed as per the\n  terms found in the Website https://initappz.com/license\n  Copyright and Good Faith Purchasers © 2020-present initappz.\n*/\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { StripePaymentsPageRoutingModule } from './stripe-payments-routing.module';\n\nimport { StripePaymentsPage } from './stripe-payments.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    StripePaymentsPageRoutingModule\n  ],\n  declarations: [StripePaymentsPage]\n})\nexport class StripePaymentsPageModule { }\n","export default \"@charset \\\"UTF-8\\\";\\n/*\\n  Authors : initappz (Rahul Jograna)\\n  Website : https://initappz.com/\\n  App Name : ionic 5 groceryee app\\n  Created : 10-Sep-2020\\n  This App Template Source code is licensed as per the\\n  terms found in the Website https://initappz.com/license\\n  Copyright and Good Faith Purchasers © 2020-present initappz.\\n*/\\n.btn_right {\\n  position: relative;\\n  z-index: 999999;\\n}\\n.img_menu {\\n  width: 17px;\\n  position: absolute;\\n  right: 20px;\\n}\\n.div_content {\\n  width: 100%;\\n  padding-left: 20px;\\n  padding-right: 20px;\\n}\\n.div_content .div_inner {\\n  width: 100%;\\n  margin-top: 15px;\\n  padding-bottom: 15px;\\n}\\n.div_content .div_inner .r {\\n  position: absolute;\\n  top: 50%;\\n  transform: translateY(-50%);\\n}\\n.div_content .div_inner .lbl_number {\\n  display: block;\\n  font-size: 17px;\\n  color: gray;\\n  margin-left: 10px;\\n}\\n.div_content .div_inner .img_visa {\\n  float: right;\\n  position: absolute;\\n  top: 50%;\\n  display: block;\\n  font-size: 17px;\\n  color: gray;\\n  margin-left: 10px;\\n  transform: translateY(-50%);\\n  height: 15px !important;\\n  width: 50px !important;\\n}\\n.btn_addcard {\\n  margin-top: 30px;\\n  --box-shadow: none !important;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvc3RyaXBlLXBheW1lbnRzL3N0cmlwZS1wYXltZW50cy5wYWdlLnNjc3MiLCIvVXNlcnMvYWRtaW4vRGVza3RvcC9Hcm9jZXJ5IERlbGl2ZXJ5L2lvbmljNUdyb2NlcnllZUFwcEZ1bGxfVjcvQXBwX2NvZGUvVXNlcl9hcHAvc3JjL2FwcC9wYWdlcy9zdHJpcGUtcGF5bWVudHMvc3RyaXBlLXBheW1lbnRzLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxnQkFBZ0I7QUNBaEI7Ozs7Ozs7O0NBQUE7QUFTQTtFQUNJLGtCQUFBO0VBQ0EsZUFBQTtBREVKO0FDQUE7RUFDSSxXQUFBO0VBQ0Esa0JBQUE7RUFDQSxXQUFBO0FER0o7QUNEQTtFQUNJLFdBQUE7RUFDQSxrQkFBQTtFQUNBLG1CQUFBO0FESUo7QUNGSTtFQUNJLFdBQUE7RUFDQSxnQkFBQTtFQUNBLG9CQUFBO0FESVI7QUNGUTtFQUNJLGtCQUFBO0VBQ0EsUUFBQTtFQUNBLDJCQUFBO0FESVo7QUNGUTtFQUNJLGNBQUE7RUFDQSxlQUFBO0VBQ0EsV0FBQTtFQUNBLGlCQUFBO0FESVo7QUNGUTtFQUNJLFlBQUE7RUFDQSxrQkFBQTtFQUNBLFFBQUE7RUFDQSxjQUFBO0VBQ0EsZUFBQTtFQUNBLFdBQUE7RUFDQSxpQkFBQTtFQUNBLDJCQUFBO0VBQ0EsdUJBQUE7RUFDQSxzQkFBQTtBRElaO0FDQUE7RUFDSSxnQkFBQTtFQUNBLDZCQUFBO0FER0oiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9zdHJpcGUtcGF5bWVudHMvc3RyaXBlLXBheW1lbnRzLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIkBjaGFyc2V0IFwiVVRGLThcIjtcbi8qXG4gIEF1dGhvcnMgOiBpbml0YXBweiAoUmFodWwgSm9ncmFuYSlcbiAgV2Vic2l0ZSA6IGh0dHBzOi8vaW5pdGFwcHouY29tL1xuICBBcHAgTmFtZSA6IGlvbmljIDUgZ3JvY2VyeWVlIGFwcFxuICBDcmVhdGVkIDogMTAtU2VwLTIwMjBcbiAgVGhpcyBBcHAgVGVtcGxhdGUgU291cmNlIGNvZGUgaXMgbGljZW5zZWQgYXMgcGVyIHRoZVxuICB0ZXJtcyBmb3VuZCBpbiB0aGUgV2Vic2l0ZSBodHRwczovL2luaXRhcHB6LmNvbS9saWNlbnNlXG4gIENvcHlyaWdodCBhbmQgR29vZCBGYWl0aCBQdXJjaGFzZXJzIMKpIDIwMjAtcHJlc2VudCBpbml0YXBwei5cbiovXG4uYnRuX3JpZ2h0IHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB6LWluZGV4OiA5OTk5OTk7XG59XG5cbi5pbWdfbWVudSB7XG4gIHdpZHRoOiAxN3B4O1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHJpZ2h0OiAyMHB4O1xufVxuXG4uZGl2X2NvbnRlbnQge1xuICB3aWR0aDogMTAwJTtcbiAgcGFkZGluZy1sZWZ0OiAyMHB4O1xuICBwYWRkaW5nLXJpZ2h0OiAyMHB4O1xufVxuLmRpdl9jb250ZW50IC5kaXZfaW5uZXIge1xuICB3aWR0aDogMTAwJTtcbiAgbWFyZ2luLXRvcDogMTVweDtcbiAgcGFkZGluZy1ib3R0b206IDE1cHg7XG59XG4uZGl2X2NvbnRlbnQgLmRpdl9pbm5lciAuciB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiA1MCU7XG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTtcbn1cbi5kaXZfY29udGVudCAuZGl2X2lubmVyIC5sYmxfbnVtYmVyIHtcbiAgZGlzcGxheTogYmxvY2s7XG4gIGZvbnQtc2l6ZTogMTdweDtcbiAgY29sb3I6IGdyYXk7XG4gIG1hcmdpbi1sZWZ0OiAxMHB4O1xufVxuLmRpdl9jb250ZW50IC5kaXZfaW5uZXIgLmltZ192aXNhIHtcbiAgZmxvYXQ6IHJpZ2h0O1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogNTAlO1xuICBkaXNwbGF5OiBibG9jaztcbiAgZm9udC1zaXplOiAxN3B4O1xuICBjb2xvcjogZ3JheTtcbiAgbWFyZ2luLWxlZnQ6IDEwcHg7XG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTtcbiAgaGVpZ2h0OiAxNXB4ICFpbXBvcnRhbnQ7XG4gIHdpZHRoOiA1MHB4ICFpbXBvcnRhbnQ7XG59XG5cbi5idG5fYWRkY2FyZCB7XG4gIG1hcmdpbi10b3A6IDMwcHg7XG4gIC0tYm94LXNoYWRvdzogbm9uZSAhaW1wb3J0YW50O1xufSIsIi8qXG4gIEF1dGhvcnMgOiBpbml0YXBweiAoUmFodWwgSm9ncmFuYSlcbiAgV2Vic2l0ZSA6IGh0dHBzOi8vaW5pdGFwcHouY29tL1xuICBBcHAgTmFtZSA6IGlvbmljIDUgZ3JvY2VyeWVlIGFwcFxuICBDcmVhdGVkIDogMTAtU2VwLTIwMjBcbiAgVGhpcyBBcHAgVGVtcGxhdGUgU291cmNlIGNvZGUgaXMgbGljZW5zZWQgYXMgcGVyIHRoZVxuICB0ZXJtcyBmb3VuZCBpbiB0aGUgV2Vic2l0ZSBodHRwczovL2luaXRhcHB6LmNvbS9saWNlbnNlXG4gIENvcHlyaWdodCBhbmQgR29vZCBGYWl0aCBQdXJjaGFzZXJzIMKpIDIwMjAtcHJlc2VudCBpbml0YXBwei5cbiovXG4uYnRuX3JpZ2h0e1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICB6LWluZGV4OiA5OTk5OTk7XG59XG4uaW1nX21lbnV7XG4gICAgd2lkdGg6IDE3cHg7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHJpZ2h0OiAyMHB4O1xufVxuLmRpdl9jb250ZW50e1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIHBhZGRpbmctbGVmdDogMjBweDtcbiAgICBwYWRkaW5nLXJpZ2h0OiAyMHB4O1xuXG4gICAgLmRpdl9pbm5lcntcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIG1hcmdpbi10b3A6IDE1cHg7XG4gICAgICAgIHBhZGRpbmctYm90dG9tOiAxNXB4O1xuXG4gICAgICAgIC5ye1xuICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgdG9wOiA1MCU7XG4gICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7XG4gICAgICAgIH1cbiAgICAgICAgLmxibF9udW1iZXJ7XG4gICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTdweDtcbiAgICAgICAgICAgIGNvbG9yOiBncmF5O1xuICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDEwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLmltZ192aXNhe1xuICAgICAgICAgICAgZmxvYXQ6IHJpZ2h0O1xuICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgdG9wOiA1MCU7XG4gICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTdweDtcbiAgICAgICAgICAgIGNvbG9yOiBncmF5O1xuICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDEwcHg7XG4gICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7XG4gICAgICAgICAgICBoZWlnaHQ6IDE1cHggIWltcG9ydGFudDtcbiAgICAgICAgICAgIHdpZHRoOiA1MHB4ICFpbXBvcnRhbnQ7XG4gICAgICAgIH1cbiAgICB9XG59XG4uYnRuX2FkZGNhcmR7XG4gICAgbWFyZ2luLXRvcDogMzBweDtcbiAgICAtLWJveC1zaGFkb3c6IG5vbmUgIWltcG9ydGFudDtcbn0iXX0= */\";","/*\n  Authors : initappz (Rahul Jograna)\n  Website : https://initappz.com/\n  App Name : ionic 5 groceryee app\n  Created : 10-Sep-2020\n  This App Template Source code is licensed as per the\n  terms found in the Website https://initappz.com/license\n  Copyright and Good Faith Purchasers © 2020-present initappz.\n*/\nimport { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { UtilService } from 'src/app/services/util.service';\nimport swal from 'sweetalert2';\nimport { NavController } from '@ionic/angular';\nimport { ApiService } from 'src/app/services/api.service';\nimport { CartService } from 'src/app/services/cart.service';\nimport * as moment from 'moment';\n@Component({\n  selector: 'app-stripe-payments',\n  templateUrl: './stripe-payments.page.html',\n  styleUrls: ['./stripe-payments.page.scss'],\n})\nexport class StripePaymentsPage implements OnInit {\n\n  cards: any[] = [];\n  token: any;\n  paykey: any;\n  constructor(\n    private router: Router,\n    private api: ApiService,\n    public util: UtilService,\n    private navCtrl: NavController,\n    public cart: CartService\n  ) {\n    // const items = this.cart.cart;\n  }\n\n  ngOnInit() {\n  }\n\n  getCards() {\n    console.log(this.util.userInfo.stripe_key);\n    this.api.httpGet('https://api.stripe.com/v1/customers/' + this.util.userInfo.stripe_key +\n      '/sources?object=card', this.util.stripe).subscribe((cards: any) => {\n        console.log(cards);\n        if (cards && cards.data) {\n          this.cards = cards.data;\n          this.token = this.cards[0].id;\n        }\n      }, (error) => {\n        console.log(error);\n        if (error && error.error && error.error.error && error.error.error.message) {\n          this.util.showErrorAlert(error.error.error.message);\n          return false;\n        }\n        this.util.errorToast(this.util.getString('Something went wrong'));\n      });\n  }\n\n  payment() {\n    console.log('place order');\n\n    swal.fire({\n      title: this.util.getString('Are you sure?'),\n      text: this.util.getString('Orders once placed cannot be cancelled and are non-refundable'),\n      icon: 'question',\n      confirmButtonText: this.util.getString('Yes'),\n      cancelButtonText: this.util.getString('cancel'),\n      showCancelButton: true,\n      backdrop: false,\n      background: 'white'\n    }).then((data) => {\n      console.log(data);\n      if (data && data.value) {\n        console.log('go to procesed,,');\n        const options = {\n          amount: this.cart.grandTotal * 100,\n          currency: this.util.stripeCode,\n          customer: this.util.userInfo.stripe_key,\n          card: this.token,\n        };\n        console.log('options', options);\n        const url = 'https://api.stripe.com/v1/charges';\n        this.util.show();\n        this.api.externalPost(url, options, this.util.stripe).subscribe((data: any) => {\n          console.log('------------------------->', data);\n          this.paykey = data.id;\n          this.util.hide();\n          this.util.showToast(this.util.getString('Payment Success'), 'success', 'bottom');\n          this.createOrder();\n        }, (error) => {\n          this.util.hide();\n          console.log(error);\n          this.util.hide();\n          if (error && error.error && error.error.error && error.error.error.message) {\n            this.util.showErrorAlert(error.error.error.message);\n            return false;\n          }\n          this.util.errorToast(this.util.getString('Something went wrong'));\n        });\n      }\n    });\n  }\n\n  async createOrder() {\n    // 2020-07-23 14:09:19\n    const storeId = [...new Set(this.cart.cart.map(item => item.store_id))];\n    const orderStatus = [];\n    storeId.forEach(element => {\n      const info = {\n        id: element,\n        status: 'created'\n      }\n      orderStatus.push(info)\n    });\n    const notes = [\n      {\n        status: 1,\n        value: 'Order Created',\n        time: moment().format('lll'),\n      }\n    ];\n    const param = {\n      uid: localStorage.getItem('uid'),\n      store_id: storeId.join(),\n      date_time: this.cart.datetime === 'today' ? moment().format('YYYY-MM-DD HH:mm:ss') : moment().add(1, 'days').format('YYYY-MM-DD HH:mm:ss'),\n      paid_method: 'stripe',\n      order_to: this.cart.deliveryAt,\n      orders: JSON.stringify(this.cart.cart),\n      notes: JSON.stringify(notes),\n      address: this.cart.deliveryAt === 'home' ? JSON.stringify(this.cart.deliveryAddress) : '',\n      driver_id: '',\n      total: this.cart.totalPrice,\n      tax: this.cart.orderTax,\n      grand_total: this.cart.grandTotal,\n      delivery_charge: this.cart.deliveryPrice,\n      coupon_code: this.cart.coupon ? JSON.stringify(this.cart.coupon) : '',\n      discount: this.cart.discount,\n      pay_key: '',\n      status: JSON.stringify(orderStatus),\n      assignee: '',\n      extra: JSON.stringify(this.cart.userOrderTaxByStores)\n    }\n\n    console.log('param----->', param);\n\n    this.util.show();\n    this.api.post('orders/save', param).subscribe((data: any) => {\n      console.log(data);\n      this.util.hide();\n      this.api.createOrderNotification(this.cart.stores);\n      this.cart.clearCart();\n      this.util.publishNewOrder();\n      this.navCtrl.navigateRoot(['/tabs/orders']);\n    }, error => {\n      console.log(error);\n      this.util.hide();\n      this.util.showToast(this.util.getString('Something went wrong'), 'danger', 'bottom');\n    });\n  }\n\n  onAdd() {\n    this.router.navigate(['tabs/cart/add-card']);\n  }\n\n  back() {\n    this.navCtrl.back();\n  }\n\n  changeMethod(id) {\n    this.token = id;\n  }\n\n  ionViewWillEnter() {\n    if (this.util.userInfo && this.util.userInfo.stripe_key) {\n      this.getCards();\n    }\n\n  }\n}\n"]}